buildscript {
    repositories {
        jcenter()
        maven {
            name = 'xapiLocal'
            url = new URI("file://$rootDir/repo")
        }
    }
    dependencies {
        classpath 'com.github.jengelman.gradle.plugins:shadow:4.0.4'
        classpath 'net.wti.gradle:xapi-gradle-plugin:0.5.1'
    }
}

plugins {
    id 'java-library'
    id 'xapi-base'
}
plugins.apply 'com.github.johnrengelman.shadow'
setProperty('xapi.main.component', 'shadow')
apply from: "$rootDir/gradle/xapi-env.gradle"

tasks.jar.configure {
    classifier = 'default'
}

tasks.named('shadowJar').configure {
    classifier = null
    zip64=true
}
artifacts {
    archives shadowJar
}
assemble.dependsOn(shadowJar)

dependencies {
    compile project(':xapi-server-parent:xapi-server-vertx')
    compile project(':xapi-jre-parent:xapi-jre-ui-parent:xapi-jre-ui-javafx')
    compile project(':xapi-jre-parent:xapi-jre-inject')
    compile project(':xapi-dev-parent:xapi-dev-file')
    compile project(':xapi-dev-parent:xapi-dev-shell')
    compile project(':xapi-dev-parent:xapi-dev-scanner')
    compile project(':xapi-dev-parent:xapi-dev-gwtc:xapi-gwtc-api')
    compile project(':xapi-dev-parent:xapi-dev-gwtc:xapi-gwtc-impl')
    compile project(':xapi-dev-parent:xapi-dev-maven')
    compile "net.wti.core:xapi-gen:$version"
    compile project(':xapi-server-parent:xapi-server-gen')
    testCompile project(':xapi-core-parent:xapi-core-test')
}

description = 'XApi - Dev uber jar'
