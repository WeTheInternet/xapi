plugins {
    id 'xapi-require'
}

sourceSets.getByName('main').java {
    srcDirs 'src/main/java',
            // for now, we'll do this manually.
            'src/main/gen'
}

xapiRequire.main().configure {
    external "net.wti.core:xapi-lang-core:${->version}", 'main'
    internal 'xapi-gwt3:main'
    internal 'xapi-elemental:main'
    internal 'xapi-jre-parent:xapi-jre-io:main:main'
    internal 'xapi-core-parent:xapi-core-ui-parent:xapi-core-ui-generator:main:main'
    internal 'xapi-core-parent:xapi-core-ui-parent:xapi-core-ui-api:main:main'
    external 'net.wetheinter:gwt-user:2.8.0'
}

xapiRequire.module('test').configure {
    internal 'xapi-dev-parent:xapi-dev-gwtc:xapi-gwtc-impl:main:main'
    internal 'xapi-dev-parent:xapi-dev-javac:main:main'
    internal 'xapi-jre-parent:xapi-jre-inject:main:main'
    external 'junit:junit:4.12'
    external 'info.cukes:cucumber-java:1.2.5'
    external 'info.cukes:cucumber-junit:1.2.5'
    external 'org.assertj:assertj-core:3.2.0'
}

dependencies {
    compileOnly 'net.wetheinter:gwt-dev:2.8.0'
    testRuntime 'net.wetheinter:gwt-dev:2.8.0'
}

description = 'XApi - Web Component Implementation'

gradle.projectsEvaluated {
    test {
        maxHeapSize = '5G'
    }
}
