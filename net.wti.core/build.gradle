plugins {
    id 'idea'
    id 'wrapper'
    id 'groovy'
}
apply from: "$rootDir.parent/gradle/xapi-env.gradle"
String xapiHome = extensions.getByName('xapi.home')
apply from: "$xapiHome/gradle/child-build.gradle"

apply plugin: 'xapi-schema'

import net.wti.gradle.system.spi.GradleServiceFinder

xapiSchema {
    platforms {
        main
    }
    archives {
        main
    }
    archives.create('test').require 'main'
}

TaskProvider required = tasks.register('publishRequired')

group 'net.wti.core'
version '0.5.1'
gradle.beforeProject {
    Project p ->
    
    p.group 'net.wti.core'
    p.version '0.5.1'

    p.apply plugin: 'xapi-schema'
    p.apply plugin: 'maven-publish'
    p.apply plugin: 'xapi-publish'
    p.apply plugin: 'idea'

}

GradleServiceFinder.getService(project)
