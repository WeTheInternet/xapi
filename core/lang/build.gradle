plugins {
    id 'java-library'
    id 'groovy'
    id "ca.coglinc.javacc" version "2.4.0"
    id 'xapi-base'
}

xapi {
    platform {
        dev {}
    }
}

apply from: "$rootDir/gradle/xapi-env.gradle"
String xapiVersion = findProperty('xapiVersion')

repositories {
    jcenter()
}

compileJavacc.outputDirectory = file('src/main/gen')

SourceSet main = sourceSets.getByName('main') {
    java {
        srcDirs = ['src/main/java', compileJavacc.outputDirectory]
    }

    groovy {
        // explicitly empty; we only use groovy for testing.
        srcDirs = []
    }
}


dependencies {
    api "net.wti.core:xapi-fu:$xapiVersion"
    // TODO: drop this to implementation?
    api project(':xapi-dev-parent:xapi-dev-source')
    xapiDev project(':xapi-core-parent:xapi-core-collect')
    xapiDev project(':xapi-core-parent:xapi-core-reflect')
    testCompile "org.spockframework:spock-core:1.2-groovy-2.4"
    testRuntime project(':xapi-jre-parent:xapi-jre-collect')
    javacc 'net.java.dev.javacc:javacc:7.0.4'
}

description = 'XApi - Java language extensions / parsing tools'
