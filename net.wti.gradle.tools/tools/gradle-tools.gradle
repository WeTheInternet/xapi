plugins {
    id 'java-library'
    id 'groovy'
    id 'java-gradle-plugin'
}

description = '''Xapi Gradle Tools: Pure gradle tools, suitable for (re)use by all modules.
This handles the basics of publishing and path manifest production.'''

repositories.mavenCentral()

sourceCompatibility = JavaVersion.VERSION_1_8
targetCompatibility = JavaVersion.VERSION_1_8

dependencies {
    compileOnly gradleApi()
    api "net.wti.gradle.modern:xapi-gradle-core:${->version}"

    testImplementation project(':xapi-gradle-test')
    // we mock classes, so we need spock-compatible bytecode lib at runtime
    testImplementation 'net.bytebuddy:byte-buddy:1.11.0'
    testImplementation 'junit:junit:4.12'
}

sourceSets.main.groovy.srcDirs = []

gradlePlugin {
    plugins {
        xapiSchema {
            id = 'xapi-schema'
            implementationClass = 'net.wti.gradle.schema.plugin.XapiSchemaPlugin'
        }
        xapiClasspath {
            id = 'xapi-classpath'
            implementationClass = 'net.wti.gradle.classpath.plugin.XapiClasspathPlugin'
        }
        xapiRequire {
            id = 'xapi-require'
            implementationClass = 'net.wti.gradle.require.plugin.XapiRequirePlugin'
        }
    }
}
