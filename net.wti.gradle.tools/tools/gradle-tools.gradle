plugins {
    id 'java'
    id 'groovy'
    id 'java-gradle-plugin'
}

description = '''Xapi Gradle Tools: Pure gradle tools, suitable for (re)use by all modules.
This handles the basics of publishing and path manifest production.'''

repositories.jcenter()

dependencies {
    compile gradleApi()
    // Using external module reference for what could be a project() dependency,
    // if the groovy+java-library plugin did not mess up groovy so badly.
//    testCompile "net.wti.gradle.tools:xapi-gradle-test:${->version}"
    testCompile project(':xapi-gradle-test')
    compile project(':xapi-gradle-core')
}

sourceSets {
    main {
        groovy.srcDirs = []
    }
}

gradlePlugin {
    plugins {
        xapiSchema {
            id = 'xapi-schema'
            implementationClass = 'net.wti.gradle.schema.plugin.XapiSchemaPlugin'
        }
        xapiRequire {
            id = 'xapi-require'
            implementationClass = 'net.wti.gradle.require.plugin.XapiRequirePlugin'
        }
    }
}