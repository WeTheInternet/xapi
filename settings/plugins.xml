<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
 <modelVersion>4.0.0</modelVersion>
 <parent>
  <groupId>net.wetheinter</groupId>
  <artifactId>xapi-settings-dependencies</artifactId>
  <version>0.4-SNAPSHOT</version>
  <relativePath>dependencies.xml</relativePath>
 </parent>

 <groupId>net.wetheinter</groupId>
 <artifactId>xapi-settings-plugins</artifactId>
 <version>0.4-SNAPSHOT</version>
 <packaging>pom</packaging>
 <name>XApi - Settings (Plugins and Profiles)</name>
 <description>
  This pom is dedicated to exposing shared plugin configs and profiles that xapi modules may wish to activate.
  </description>
 <organization>
  <name>The Internet Party</name>
 </organization>
 <modules>
  <module>../pom.xml</module>
 </modules>

 <properties>
  <relative.output>plugins</relative.output>
 </properties>

 <build>
  <directory>${project.basedir}/target/plugins</directory>
  <pluginManagement>
   <plugins>
    <plugin>
     <groupId>net.wetheinter</groupId>
     <artifactId>xapi-maven-plugin</artifactId>
     <version>${xapi.version}</version>
    </plugin>
    <plugin>
     <artifactId>maven-surefire-plugin</artifactId>
     <version>2.16</version>
     <configuration>
      <forkCount>1.5C</forkCount>
     </configuration>
    </plugin>
    <plugin>
     <artifactId>maven-source-plugin</artifactId>
     <version>2.2.1</version>
    </plugin>
    <plugin>
     <artifactId>maven-install-plugin</artifactId>
     <version>2.5.1</version>
    </plugin>
    <plugin>
     <artifactId>maven-resources-plugin</artifactId>
     <version>2.6</version>
    </plugin>
    <plugin>
     <artifactId>maven-clean-plugin</artifactId>
     <version>2.5</version>
    </plugin>
    <plugin>
     <artifactId>maven-jar-plugin</artifactId>
     <version>2.4</version>
    </plugin>
    <plugin>
     <artifactId>maven-compiler-plugin</artifactId>
     <version>3.1</version>
     <configuration>
      <source>${java.version}</source>
      <target>${java.version}</target>
      <compilerVersion>${java.version}</compilerVersion>
     </configuration>
     <executions>
      <execution>
       <id>default-compile</id>
       <phase>compile</phase>
       <goals>
        <goal>compile</goal>
       </goals>
       <inherited>true</inherited>
       <configuration>
        <proc>none</proc>
       </configuration>
      </execution>
      <execution>
       <id>default-testCompile</id>
       <phase>test-compile</phase>
       <goals>
        <goal>testCompile</goal>
       </goals>
       <inherited>true</inherited>
       <configuration>
        <proc>none</proc>
       </configuration>
      </execution>
     </executions>
    </plugin>
    <plugin>
     <groupId>org.bsc.maven</groupId>
     <artifactId>maven-processor-plugin</artifactId>
     <version>2.2.4</version>
    </plugin>
    <plugin>
     <groupId>org.apache.maven.mojo</groupId>
     <artifactId>maven-plugin-plugin</artifactId>
     <version>3.2</version>
     <configuration>
      <goalPrefix>xapi</goalPrefix>
     </configuration>
    </plugin>
    <plugin>
     <groupId>org.codehaus.mojo</groupId>
     <artifactId>build-helper-maven-plugin</artifactId>
     <version>1.8</version>
     <executions>
      <execution>
       <id>add-source</id>
       <phase>generate-sources</phase>
       <goals>
        <goal>add-source</goal>
       </goals>
       <inherited>false</inherited>
       <configuration>
        <sources>
         <source>${project.build.directory}/generated-sources/annotations</source>
         <source>${project.build.directory}/generated-sources/xapi</source>
        </sources>
       </configuration>
      </execution>
     </executions>
     <goals>
      <goal>add-source</goal>
     </goals>
    </plugin>
    <plugin>
     <groupId>org.codehaus.mojo</groupId>
     <artifactId>selenium-maven-plugin</artifactId>
     <version>2.3</version>
     <configuration>
      <workingDirectory>/tmp/selenium</workingDirectory>
     </configuration>
    </plugin>
    <plugin>
     <artifactId>maven-shade-plugin</artifactId>
     <version>2.0</version>
     <executions>
      <execution>
       <phase>package</phase>
       <goals>
        <goal>shade</goal>
       </goals>
       <configuration>
        <filters>
         <filter>
          <artifact>net.wetheinter:*</artifact>
          <includes>
           <include>**/*</include>
          </includes>
         </filter>
        </filters>
       </configuration>
      </execution>
     </executions>
    </plugin>
    <!--This plugin's configuration is used to store Eclipse m2e settings 
     only. It has no influence on the Maven build itself. -->
    <plugin>
     <groupId>org.eclipse.m2e</groupId>
     <artifactId>lifecycle-mapping</artifactId>
     <version>1.0.0</version>
     <configuration>
      <lifecycleMappingMetadata>
       <pluginExecutions>
        <pluginExecution>
         <pluginExecutionFilter>
          <groupId>org.codehaus.mojo</groupId>
          <artifactId>
           build-helper-maven-plugin
          </artifactId>
          <versionRange>[1.8,)</versionRange>
          <goals>
           <goal>add-source</goal>
          </goals>
         </pluginExecutionFilter>
         <action>
          <execute>
           <runOnConfiguration>true</runOnConfiguration>
           <runOnIncremental>true</runOnIncremental>
          </execute>
         </action>
        </pluginExecution>
       </pluginExecutions>
      </lifecycleMappingMetadata>
     </configuration>
    </plugin>
   </plugins>
  </pluginManagement>
 </build>

 <profiles>
  <profile>
   <id>release</id>
   <activation>
    <property>
     <name>xapi.release</name>
    </property>
   </activation>
   <build>
    <plugins>
     <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-source-plugin</artifactId>
      <executions>
       <execution>
        <id>attach-sources</id>
        <goals>
         <goal>jar</goal>
        </goals>
       </execution>
       <execution>
        <id>attach-javadocs</id>
        <goals>
         <goal>jar</goal>
        </goals>
       </execution>
      </executions>
     </plugin>

     <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-jar-plugin</artifactId>
      <executions>
       <execution>
        <goals>
         <goal>test-jar</goal>
        </goals>
       </execution>
      </executions>
     </plugin>

    </plugins>
   </build>

  </profile>

  <profile>
   <id>android</id>
   <activation>
    <property>
     <name>xapi.platform</name>
     <value>android</value>
    </property>
   </activation>
   <build>
    <pluginManagement>
     <plugins>
      <plugin>
       <groupId>com.jayway.maven.plugins.android.generation2</groupId>
       <artifactId>android-maven-plugin</artifactId>
       <version>${android.maven.version}</version>
       <configuration>
        <androidManifestFile>${project.basedir}/AndroidManifest.xml</androidManifestFile>
        <assetsDirectory>${project.basedir}/assets</assetsDirectory>
        <resourceDirectory>${project.basedir}/res</resourceDirectory>
        <sdk>
         <platform>11</platform>
        </sdk>
        <deleteConflictingFiles>true</deleteConflictingFiles>
        <undeployBeforeDeploy>true</undeployBeforeDeploy>
        <jvmArguments>
         <jvmArgument>-Xmx1024m</jvmArgument>
        </jvmArguments>
        <dex>
         <jvmArguments>
          <jvmArgument>-Xmx1024m</jvmArgument>
         </jvmArguments>
        </dex>
       </configuration>
       <extensions>true</extensions>
      </plugin>
     </plugins>
    </pluginManagement>
    <plugins>
     <plugin>
      <groupId>com.jayway.maven.plugins.android.generation2</groupId>
      <artifactId>android-maven-plugin</artifactId>
     </plugin>
    </plugins>
   </build>
  </profile>

  <profile>
   <id>release-sign-artifacts</id>
   <activation>
    <property>
     <name>performRelease</name>
     <value>true</value>
    </property>
   </activation>
   <build>
    <plugins>
     <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-gpg-plugin</artifactId>
      <version>1.1</version>
      <executions>
       <execution>
        <id>sign-artifacts</id>
        <phase>verify</phase>
        <goals>
         <goal>sign</goal>
        </goals>
       </execution>
      </executions>
     </plugin>
    </plugins>
   </build>
  </profile>
 </profiles>
</project>
